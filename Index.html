<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sci-Fi Face Scanner Prank</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js" crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        body {
            margin: 0;
            padding: 0;
            background-color: #050505;
            color: #0f0;
            font-family: 'Share Tech Mono', monospace;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Left Side: Camera aur Scanner */
        .scanner-container {
            position: relative;
            width: 65%;
            height: 100%;
            border-right: 3px solid #0f0;
            box-shadow: inset 0 0 50px rgba(0, 255, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }

        .input_video {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1); /* Mirror effect */
            opacity: 0.6; /* Thoda dark sci-fi look ke liye */
        }

        .output_canvas {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: scaleX(-1);
            z-index: 2;
        }

        /* Scanning Laser Line Animation */
        .laser {
            position: absolute;
            width: 100%;
            height: 4px;
            background-color: rgba(0, 255, 0, 0.8);
            box-shadow: 0 0 15px 5px rgba(0, 255, 0, 0.5);
            top: 0;
            left: 0;
            z-index: 3;
            animation: scan 3s linear infinite;
        }

        @keyframes scan {
            0% { top: 0%; }
            50% { top: 100%; }
            100% { top: 0%; }
        }

        /* Right Side: Terminal / Hacker Panel */
        .terminal-container {
            width: 35%;
            padding: 20px;
            background: rgba(0, 10, 0, 0.9);
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
            position: relative;
        }

        .header {
            font-size: 24px;
            border-bottom: 2px dashed #0f0;
            padding-bottom: 10px;
            margin-bottom: 20px;
            text-shadow: 0 0 5px #0f0;
            display: flex;
            justify-content: space-between;
        }

        .blink { animation: blinker 1s linear infinite; color: red; text-shadow: 0 0 10px red; }
        @keyframes blinker { 50% { opacity: 0; } }

        .terminal-text {
            font-size: 18px;
            line-height: 1.8;
            white-space: pre-wrap;
            text-shadow: 0 0 3px #0f0;
        }

        .overlay-grid {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(0, 255, 0, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 255, 0, 0.1) 1px, transparent 1px);
            background-size: 30px 30px; z-index: 1; pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="scanner-container">
        <div class="overlay-grid"></div>
        <video class="input_video" autoplay playsinline></video>
        <canvas class="output_canvas"></canvas>
        <div class="laser" id="laser-line"></div>
    </div>

    <div class="terminal-container">
        <div class="header">
            <span>DATABASE SEARCH</span>
            <span id="status-indicator">SCANNING...</span>
        </div>
        <div class="terminal-text" id="terminal"></div>
    </div>

    <script>
        const videoElement = document.querySelector('.input_video');
        const canvasElement = document.querySelector('.output_canvas');
        const canvasCtx = canvasElement.getContext('2d');
        const terminalInfo = document.getElementById('terminal');
        const statusIndicator = document.getElementById('status-indicator');
        const laser = document.getElementById('laser-line');

        let isLocked = false;
        let scanTimer = null;
        let typingStarted = false;

        // Jo details aapne batayi thi
        const targetDetails = [
            "> ANALYZING BIOMETRICS...",
            "> CROSS-REFERENCING DATABASE...",
            "> MATCH FOUND! 99.9% ACCURACY.",
            " ",
            "---------------------------------",
            " IDENTIFICATION DATA",
            "---------------------------------",
            " NAME        : Hippo",
            " AGE         : 30",
            " ADDRESS     : Killa road nanded,",
            "               Maharashtra 431602",
            " MOBILE DEV. : Oneplus",
            " MOBILE NO.  : 8855931702",
            "---------------------------------",
            " ",
            "> TARGET LOCKED ðŸ”´"
        ];

        // Typewriter Effect Function
        async function typeWriterEffect(lines) {
            terminalInfo.innerHTML = "";
            statusIndicator.innerText = "MATCH FOUND";
            statusIndicator.className = "blink";
            laser.style.backgroundColor = "rgba(255, 0, 0, 0.8)"; // Laser red ho jayegi
            laser.style.boxShadow = "0 0 15px 5px rgba(255, 0, 0, 0.5)";

            for (let i = 0; i < lines.length; i++) {
                let currentLine = lines[i];
                let lineDiv = document.createElement('div');
                terminalInfo.appendChild(lineDiv);
                
                for (let j = 0; j < currentLine.length; j++) {
                    lineDiv.innerHTML += currentLine.charAt(j);
                    // Typing speed
                    await new Promise(r => setTimeout(r, 30)); 
                }
                // Har line ke baad thoda pause
                await new Promise(r => setTimeout(r, 200)); 
            }
        }

        // Face Detection Results Handle Karna
        function onResults(results) {
            canvasElement.width = videoElement.videoWidth;
            canvasElement.height = videoElement.videoHeight;
            canvasCtx.save();
            canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);

            if (results.detections.length > 0) {
                // Face mil gaya
                const detection = results.detections[0];
                const box = detection.boundingBox;

                // Face ke ird-gird Sci-fi box draw karna
                const x = box.xCenter * canvasElement.width - (box.width * canvasElement.width) / 2;
                const y = box.yCenter * canvasElement.height - (box.height * canvasElement.height) / 2;
                const w = box.width * canvasElement.width;
                const h = box.height * canvasElement.height;

                canvasCtx.strokeStyle = isLocked ? "#ff0000" : "#00ff00";
                canvasCtx.lineWidth = 4;
                
                // Box ke corners banane ka style
                const cornerLength = 30;
                canvasCtx.beginPath();
                // Top-Left
                canvasCtx.moveTo(x, y + cornerLength); canvasCtx.lineTo(x, y); canvasCtx.lineTo(x + cornerLength, y);
                // Top-Right
                canvasCtx.moveTo(x + w - cornerLength, y); canvasCtx.lineTo(x + w, y); canvasCtx.lineTo(x + w, y + cornerLength);
                // Bottom-Left
                canvasCtx.moveTo(x, y + h - cornerLength); canvasCtx.lineTo(x, y + h); canvasCtx.lineTo(x + cornerLength, y + h);
                // Bottom-Right
                canvasCtx.moveTo(x + w - cornerLength, y + h); canvasCtx.lineTo(x + w, y + h); canvasCtx.lineTo(x + w, y + h - cornerLength);
                canvasCtx.stroke();

                // Face lock hone ka logic (agar 2 seconds tak face frame mein rahe)
                if (!isLocked && !scanTimer) {
                    scanTimer = setTimeout(() => {
                        isLocked = true;
                        if (!typingStarted) {
                            typingStarted = true;
                            typeWriterEffect(targetDetails);
                        }
                    }, 2000); // 2 second ka scan time
                }
            } else {
                // Agar face hat jaye toh reset karna (agar lock na hua ho)
                if (!isLocked) {
                    clearTimeout(scanTimer);
                    scanTimer = null;
                }
            }
            canvasCtx.restore();
        }

        // MediaPipe Face Detection Setup
        const faceDetection = new FaceDetection({locateFile: (file) => {
            return `https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/${file}`;
        }});
        
        faceDetection.setOptions({
            model: 'short',
            minDetectionConfidence: 0.5
        });
        faceDetection.onResults(onResults);

        // Start Camera
        const camera = new Camera(videoElement, {
            onFrame: async () => {
                await faceDetection.send({image: videoElement});
            },
            width: 1280,
            height: 720
        });
        camera.start();
    </script>
</body>
</html>
